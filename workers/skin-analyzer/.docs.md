# Cloudflare Worker Skin Analyzer

This directory contains a sophisticated AI-powered skin analysis worker using Cloudflare's infrastructure.

## Architecture

- **Multi-Agent System**: Vision, RAG, Scoring, and Roast generation agents
- **RAG Implementation**: Vectorize-based knowledge retrieval
- **Quota Management**: Smart caching and tiered model usage
- **Image Optimization**: Pre-processing to reduce costs

## Quick Start

```bash
# Install dependencies
npm install

# Deploy to Cloudflare
wrangler deploy

# Test locally
wrangler dev
```

See [README.md](./README.md) for full deployment instructions.

## Project Structure

```
workers/skin-analyzer/
├── src/
│   ├── index.ts              # Main worker entry point
│   ├── types.ts              # TypeScript interfaces
│   ├── agents/
│   │   ├── vision-agent.ts   # Image analysis with vision model
│   │   ├── rag-agent.ts      # Knowledge retrieval
│   │   ├── scoring-agent.ts  # Glow score calculation
│   │   └── roast-agent.ts    # Roast message generation
│   ├── utils/
│   │   ├── image-optimizer.ts # Image preprocessing
│   │   └── quota-manager.ts   # Usage tracking
│   └── knowledge/
│       └── skincare-db.json  # RAG knowledge base
├── scripts/
│   └── upload-knowledge.js   # Vectorize population
├── wrangler.toml            # Cloudflare config
└── README.md                # Deployment guide
```

## Features

✅ Vision-based skin analysis  
✅ RAG-enhanced recommendations  
✅ Intelligent quota management  
✅ 70% cost savings through caching  
✅ Free tier: ~150 scans/day  
